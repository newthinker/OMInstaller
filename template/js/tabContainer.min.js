(function(g){var i=g.document;function c(o,n){return((" "+n.className+" ").indexOf(" "+o+" "))>=0}function k(r,p){var q=p.className?" "+p.className+" ":" ";r=r.split(/\s+/);for(var o=0;o<r.length;o++){var n=r[o];q=q.replace(" "+n+" "," ")}q=lang.trim(q);if(p.className!=q){p.className=q}}function f(r,p){var q=p.className?" "+p.className+" ":" ";r=r.split(/\s+/);for(var o=0;o<r.length;o++){var n=r[o];if(n&&q.indexOf(" "+n+" ")<0){q+=n+" "}}q=lang.trim(q);if(p.className!=q){p.className=q}}function m(p,o,n){n=n||"*";o=o||i.body;return d(p,o,n)}function d(t,p,o){var q=[];var s=p.getElementsByTagName(o);for(var r=0;r<s.length;r++){var u=s[r];if(a(t,u)){q.push(u)}}return q}function a(o,n){if(o.indexOf(".")>=0){return c(o.substring(1,o.length),n)}else{return n.name==o}}function l(n,q){if(!n){return null}var p=i.createElement(n);if(q&&typeof q=="object"){for(var o in q){if(q.hasOwnProperty(o)){if(o=="innerHTML"){p.innerHTML=q.innerHTML}else{p.setAttribute(o,q[o])}}}}return p}dom={hasClass:c,removeClass:k,addClass:f,getDom:m,createDom:l};function b(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}if(!Function.prototype.bind){Function.prototype.bind=function(p){var n=this,o=Array.prototype.slice.call(arguments);return function(){return n.apply(p,o.slice(1))}}}Array.prototype.remove=function(n){if(n==this.length){this.pop();return this}else{if(n==0){this.shift();return this}else{return this.slice(0,n).concat(this.slice(n+1,this.length))}}};function j(n){n=n||g.event;if(n.stopPropagation){n.stopPropagation()}else{n.cancelBubble=true}}function h(n){n=n||g.event;return n.srcElement||n.target}lang={trim:b,stopPropagation:j,srcElement:h};function e(n){this._defaultTabName="tab_";this._defaultContentName="content_";this._tabs=[];this.selectedTab=null;n=n||i.body;this._initTabContainer(n)}e.prototype.addTab=function(n){n=n||{title:"tab"+this._tabs.length,content:"content"+this._tabs.length,closable:true};this._addTab(n)};e.prototype.getTabs=function(){var p=[];var o;for(var n=0;n<this._tabs.length;n++){o=this._tabs[n];if(o){p.push(o)}}return p};e.prototype._initTabContainer=function(o){var n='<div class="tabContainer pr"><div class="tabMenus"><ul class="tabMenus-ul"><li class="addTab-li pr"><span class="tab dib  tac fl ml2 addTabSize  addTab pa">+</span></li></ul></div><div id="tabContents"class="tabContents pa"></div></div>';o.innerHTML+=n;if(o.id){this._defaultTabName=o.id+"_tab_";this._defaultContentName=o.id+"_content_"}this._initMenuAndContent(o)};e.prototype._initMenuAndContent=function(n){this._tabContainer=dom.getDom(".tabContainer",n,"div")[0];this._tabMenus=dom.getDom(".tabMenus-ul",this._tabContainer,"ul")[0];this._tabContents=dom.getDom(".tabContents",this._tabContainer,"div")[0];this.addTabBtn=dom.getDom(".addTab",this._tabMenus,"span")[0];this.addTabBtn.onclick=this.addTab.bind(this,null)};e.prototype._addTab=function(n){this._changeSelectTabStatus();this._addTabMenu(n.title,n.closable);this._addTabContent(n.content)};e.prototype._addTabMenu=function(r,n){var o=dom.createDom("li",{"class":"tabMenus-li"});var q=dom.createDom("span",{"class":"tab dib  tac fl normalTabSize pr tabCur",id:this._defaultTabName+this._tabs.length,"for":this._defaultContentName+this._tabs.length,innerHTML:r});var p=dom.createDom("span",{"class":n?"pa tab-closeBtn":"pa tab-closeBtn  dn",innerHTML:"x"});p.onclick=this._closeTabHandler.bind(this);q.onclick=this._tabClickHandler.bind(this);q.appendChild(p);o.appendChild(q);this._tabMenus.insertBefore(o,this.addTabBtn.parentNode)};e.prototype._addTabContent=function(n){var o=dom.createDom("div",{"class":"content contentCur",id:this._defaultContentName+this._tabs.length,innerHTML:n});this._tabContents.appendChild(o);this._tabs.push(o);this.selectedTab=o};e.prototype._tabClickHandler=function(n){n=n||g.event;var o=lang.srcElement(n);this._changeSelectTabStatus();dom.addClass("tabCur",o);this.selectedTab=i.getElementById(o.getAttribute("for"));dom.addClass("contentCur",this.selectedTab)};e.prototype._changeSelectTabStatus=function(){if(!this.selectedTab){return}var n=dom.getDom(".tabCur",this._tabMenus,"span")[0];dom.removeClass("tabCur",n);dom.removeClass("contentCur",this.selectedTab)};e.prototype._closeTabHandler=function(r){r=r||g.event;var o=lang.srcElement(r);var s=o.parentNode;var n=s.getAttribute("for");var q=i.getElementById(n);this._tabMenus.removeChild(s.parentNode);this._tabContents.removeChild(q);var p=n.substring(n.lastIndexOf("_")+1,n.length);this._tabs[p]=null;if(n===this.selectedTab.id){do{p--}while(!this._tabs[p]);this.selectedTab=this._tabs[p];dom.addClass("contentCur",this.selectedTab);dom.addClass("tabCur",i.getElementById(this._defaultTabName+(p)))}lang.stopPropagation(r)};g.dom=dom;g.lang=lang;g.TabContainer=e})(window);